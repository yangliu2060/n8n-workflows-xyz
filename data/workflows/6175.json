{"id":"1ZnPRyjP4J0gq5Pw","meta":{"instanceId":"281fe883012e72eba57c771d5dbf7c3138ca3fe3633c5ba2adf6169821825dd4","templateCredsSetupCompleted":true},"name":"Google Sheets to WhatsApp Bulk Messaging via Unofficial API","tags":[],"nodes":[{"id":"0037860e-fbd4-4690-8063-eb94c1aad64d","name":"Fetch All Pending Queries for Messaging","type":"n8n-nodes-base.googleSheets","position":[48,32],"parameters":{"options":{},"filtersUI":{"values":[{"lookupValue":"pending","lookupColumn":"Status"}]},"sheetName":{"__rl":true,"mode":"list","value":2104188169,"cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Ui4TzzI-Gq-bsEsrZELwW1Kyddw0IU9L1wxlHikktqw/edit#gid=2104188169","cachedResultName":"Message Queue"},"documentId":{"__rl":true,"mode":"list","value":"1Ui4TzzI-Gq-bsEsrZELwW1Kyddw0IU9L1wxlHikktqw","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Ui4TzzI-Gq-bsEsrZELwW1Kyddw0IU9L1wxlHikktqw/edit?usp=drivesdk","cachedResultName":"WhatsApp Bulk Messaging via Unofficial API"}},"credentials":{"googleSheetsOAuth2Api":{"id":"hIOzlTOST3U7PqR8","name":"Google Sheets account"}},"notesInFlow":false,"retryOnFail":false,"typeVersion":4.6},{"id":"032d3141-2d16-4b05-b94f-94272e0c7612","name":"Change State of Rows in Sent","type":"n8n-nodes-base.googleSheets","position":[912,16],"parameters":{"columns":{"value":{"Status":"sent","row_number":"={{ $('Limit').item.json.row_number }}"},"schema":[{"id":"SL","type":"string","display":true,"removed":true,"required":false,"displayName":"SL","defaultMatch":false,"canBeUsedToMatch":true},{"id":"WhatsApp No","type":"string","display":true,"removed":true,"required":false,"displayName":"WhatsApp No","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Name","type":"string","display":true,"removed":true,"required":false,"displayName":"Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Message","type":"string","display":true,"removed":true,"required":false,"displayName":"Message","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Image URL","type":"string","display":true,"removed":true,"required":false,"displayName":"Image URL","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Status","type":"string","display":true,"removed":false,"required":false,"displayName":"Status","defaultMatch":false,"canBeUsedToMatch":true},{"id":"row_number","type":"number","display":true,"removed":false,"readOnly":true,"required":false,"displayName":"row_number","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":["row_number"],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{},"operation":"update","sheetName":{"__rl":true,"mode":"list","value":2104188169,"cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Ui4TzzI-Gq-bsEsrZELwW1Kyddw0IU9L1wxlHikktqw/edit#gid=2104188169","cachedResultName":"Message Queue"},"documentId":{"__rl":true,"mode":"list","value":"1Ui4TzzI-Gq-bsEsrZELwW1Kyddw0IU9L1wxlHikktqw","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Ui4TzzI-Gq-bsEsrZELwW1Kyddw0IU9L1wxlHikktqw/edit?usp=drivesdk","cachedResultName":"WhatsApp Bulk Messaging via Unofficial API"}},"credentials":{"googleSheetsOAuth2Api":{"id":"hIOzlTOST3U7PqR8","name":"Google Sheets account"}},"typeVersion":4.6},{"id":"da162b79-1c4e-4405-ad58-e0c9ffd74dd3","name":"Loop Over Items","type":"n8n-nodes-base.splitInBatches","position":[528,32],"parameters":{"options":{}},"executeOnce":false,"typeVersion":3},{"id":"f178aa36-8e99-4919-9320-36432a405bc5","name":"Wait","type":"n8n-nodes-base.wait","position":[928,192],"webhookId":"7e5b1bab-e843-4f74-8462-2bf75260215e","parameters":{},"typeVersion":1.1},{"id":"17249748-0dca-40ad-a0fd-22b6948015ed","name":"Limit","type":"n8n-nodes-base.limit","position":[352,32],"parameters":{"maxItems":60},"typeVersion":1},{"id":"18ae75b8-1dc9-4bdd-98d6-b421af4691f9","name":"Trigger Every 5 Minute","type":"n8n-nodes-base.scheduleTrigger","position":[-272,32],"parameters":{"rule":{"interval":[{"field":"minutes"}]}},"typeVersion":1.2},{"id":"d92b5e28-2752-4977-8daf-1d69ca70b7cf","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[-1232,-496],"parameters":{"color":4,"width":704,"height":1644,"content":"## üìò n8n Workflow: WhatsApp Bulk Messaging via Unofficial API\n\n## üìå Overview\n\nThis n8n workflow allows you to send **unlimited WhatsApp messages directly from a Google Sheet** using your **own WhatsApp number** via [WasenderAPI.com](https://www.wasenderapi.com/), avoiding high WhatsApp Business API costs.\n\n---\n\n## üîç What It Does\n\n- ‚úÖ Reads live data from Google Sheets  \n- üì§ Sends WhatsApp messages to listed numbers  \n- üõ° Maintains API rate limits to prevent blocking  \n- üîÑ Updates the status in Google Sheet after message is sent  \n\n---\n\n## üß∞ Prerequisites\n\nEnsure you have the following:\n\n- ‚úÖ A **WhatsApp Account** (Personal or Business)  \n- ‚úÖ **Google Sheet API** access configured in n8n  \n- ‚úÖ A Google Sheet formatted like this [sample](https://docs.google.com/spreadsheets/d/1Ui4TzzI-Gq-bsEsrZELwW1Kyddw0IU9L1wxlHikktqw/edit?usp=sharing)  \n- ‚úÖ A **WasenderAPI.com** subscription (~$6/month)  \n\n---\n\n## üìÑ Google Sheet Format\n\n| WhatsApp No | Message                     | Status   |\n|-------------|-----------------------------|----------|\n| +8801XXXXXXX | Hello, this is a test msg. | pending  |\n\n> ‚ÑπÔ∏è Make sure the `Status` column has value `pending` initially.\n\n---\n\n## üõ† Setup in n8n\n\n### 1. üîó Connect Google Sheets\n- Add a **Google Sheets** node\n- Authenticate using your Google account\n- Select the document and worksheet\n- Use filter: `Status = pending`\n\n### 2. üîÑ Loop Through Rows\n- Use **SplitInBatches** or a **Code** node to process rows in small chunks (e.g., 5 rows)\n- Add a **Wait** node to delay 5 seconds between messages\n\n### 3. üåê Send Message via HTTP Node\n- Add an **HTTP Request** node\n- **Method**: `POST`\n- **URL**: `https://app.wasenderapi.com/api/send-message`\n- **Headers**:\n  - `Content-Type`: `application/json`\n  - `Authorization`: `Bearer YOUR_API_KEY`\n- **JSON Body**:\n```json\n{\n  \"number\": \"{{ $json['WhatsApp No'] }}\",\n  \"message\": \"{{ $json['Message'] }}\"\n}\n"},"typeVersion":1},{"id":"7a5c47a0-abab-4992-866b-55912ea23ac2","name":"Send Message Using HTTP Request","type":"n8n-nodes-base.httpRequest","position":[736,192],"parameters":{"url":"https://www.wasenderapi.com/api/send-message","method":"POST","options":{},"sendQuery":true,"authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","queryParameters":{"parameters":[{"name":"to","value":"={{ $json['WhatsApp No'] }}"},{"name":"text","value":"={{ $json.Message }}"},{"name":"imageUrl","value":"={{ $json['Image URL'] }}"}]}},"credentials":{"httpBearerAuth":{"id":"eEnvhbO5JFh46Shb","name":"WasenderAPI"}},"executeOnce":false,"typeVersion":4.2}],"active":false,"pinData":{},"settings":{"executionOrder":"v1"},"versionId":"05c64115-b5bb-48b8-acc4-2091e40c6bd0","connections":{"Wait":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Limit":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Loop Over Items":{"main":[[{"node":"Change State of Rows in Sent","type":"main","index":0}],[{"node":"Send Message Using HTTP Request","type":"main","index":0}]]},"Trigger Every 5 Minute":{"main":[[{"node":"Fetch All Pending Queries for Messaging","type":"main","index":0}]]},"Change State of Rows in Sent":{"main":[[]]},"Send Message Using HTTP Request":{"main":[[{"node":"Wait","type":"main","index":0}]]},"Fetch All Pending Queries for Messaging":{"main":[[{"node":"Limit","type":"main","index":0}]]}}}