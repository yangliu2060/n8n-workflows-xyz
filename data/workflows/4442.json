{"meta":{"instanceId":"28099d2544433ae0f39c65315a4d4c531947fcb0f060a94d6047d7be5df31063","templateCredsSetupCompleted":true},"nodes":[{"id":"e61bea63-23af-4672-964a-a05443d583a8","name":"Send First Message","type":"n8n-nodes-base.whatsApp","position":[-1340,2000],"webhookId":"89b0633a-88c4-4fe8-82f4-4e3ae20a075a","parameters":{},"typeVersion":1},{"id":"e90d093d-1618-485e-8a55-cb07b260d1f1","name":"Personalised First Message","type":"@n8n/n8n-nodes-langchain.agent","position":[-1680,1900],"parameters":{},"typeVersion":1.8},{"id":"e6bc4705-4123-4fac-8fbe-e54240e98c5e","name":"Gemini","type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","position":[-1640,2120],"parameters":{},"typeVersion":1},{"id":"89442fef-72c5-4774-af77-b1e5e23c0966","name":"Contact Form","type":"n8n-nodes-base.formTrigger","position":[-2100,2000],"webhookId":"a34f7372-b42d-4176-ac9b-2518d85c125d","parameters":{},"typeVersion":2.2},{"id":"e8706cb1-e455-4486-bc4f-4735b16bef19","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[-2160,1840],"parameters":{"content":""},"typeVersion":1},{"id":"58641566-634e-4618-971c-18f2f3710186","name":"AI Agent","type":"@n8n/n8n-nodes-langchain.agent","position":[-1340,2540],"parameters":{},"typeVersion":1.7},{"id":"1873beed-8d42-497a-a1fa-8423c8378e45","name":"No Operation, do nothing","type":"n8n-nodes-base.noOp","position":[-1760,2540],"parameters":{},"typeVersion":1},{"id":"13a17f82-4d0b-410a-9fa8-2d23c3c47ee2","name":"Calendar Agent","type":"@n8n/n8n-nodes-langchain.toolWorkflow","position":[-1300,2760],"parameters":{},"typeVersion":2},{"id":"60a12daa-0df9-4459-921f-5d7b70ba17e2","name":"CRM Agent","type":"@n8n/n8n-nodes-langchain.toolWorkflow","position":[-1180,2760],"parameters":{},"typeVersion":2},{"id":"d5745cc5-de7d-4178-a2ba-0297e70a7301","name":"Postgres Chat Memory","type":"@n8n/n8n-nodes-langchain.memoryPostgresChat","position":[-1420,2760],"parameters":{},"typeVersion":1.3},{"id":"d27aba8b-432c-4270-b10b-ee58a76466cc","name":"Handle Message Types","type":"n8n-nodes-base.switch","position":[-2860,2540],"parameters":{},"typeVersion":3.2},{"id":"a50148d4-91bb-44e1-9fe3-ec008aa68b34","name":"Reply To User1","type":"n8n-nodes-base.whatsApp","position":[-2640,2740],"webhookId":"0e86d9ab-6130-44f5-a7f1-4930bfcad48b","parameters":{},"typeVersion":1},{"id":"e379eb19-a275-41e6-b157-fc4f2320c9fc","name":"Edit Fields - chat1","type":"n8n-nodes-base.set","position":[-1980,2340],"parameters":{},"typeVersion":3.4},{"id":"e9cd46c1-9265-4545-938e-9f8be97af0c4","name":"Reply To  User","type":"n8n-nodes-base.whatsApp","position":[-440,2440],"webhookId":"3b2ca5bf-7b1d-4012-b68e-ef06653a3c18","parameters":{},"typeVersion":1},{"id":"cd8701e9-22ad-44db-b0ff-8067b1fd5226","name":"WhatsApp","type":"n8n-nodes-base.whatsAppTrigger","position":[-3300,2540],"webhookId":"aaf6d81e-dbdd-47e2-a2d4-c496ff92933b","parameters":{},"typeVersion":1},{"id":"be1a15ac-020d-4f2c-ab2c-016c44263943","name":"WhatsApp Business Cloud","type":"n8n-nodes-base.whatsApp","position":[-2640,2540],"webhookId":"5cbf4730-3963-45f9-8457-6f41e648d4fe","parameters":{},"typeVersion":1},{"id":"c7fd035e-49f3-4a36-b042-3da9782d7044","name":"HTTP Request","type":"n8n-nodes-base.httpRequest","position":[-2420,2540],"parameters":{},"typeVersion":4.2},{"id":"ea0e0a79-4c67-4160-a84a-265420ef612f","name":"OpenAI","type":"@n8n/n8n-nodes-langchain.openAi","position":[-2200,2540],"parameters":{},"typeVersion":1.8},{"id":"bc53e0c7-ca12-4383-bef1-7cc3d5a26c0d","name":"Edit Fields - chat2","type":"n8n-nodes-base.set","position":[-1980,2540],"parameters":{},"typeVersion":3.4},{"id":"3c682d04-7d3f-4b39-9891-dcc904b7f1dc","name":"Output - chat","type":"n8n-nodes-base.set","position":[-440,2640],"parameters":{},"typeVersion":3.4},{"id":"0dfac069-95ce-4886-95d7-572323cbe3b0","name":"Postgres PGVector Store","type":"@n8n/n8n-nodes-langchain.vectorStorePGVector","position":[-1180,2960],"parameters":{},"typeVersion":1.1},{"id":"9228bbe6-8451-4882-bb60-aea6718e0b8d","name":"Get Lead","type":"n8n-nodes-base.postgres","position":[-3080,2540],"parameters":{},"typeVersion":2.6},{"id":"a50119b6-c772-4ca6-9f6c-bef86a75db87","name":"Switch","type":"n8n-nodes-base.switch","position":[-740,2540],"parameters":{},"typeVersion":3.2},{"id":"8499737b-71c5-403f-b603-5abcc909f066","name":"When chat message received","type":"@n8n/n8n-nodes-langchain.chatTrigger","position":[-2300,2960],"webhookId":"0e63503d-ab21-4a3d-8d29-19c5d94c24d4","parameters":{},"typeVersion":1.1},{"id":"8898ee54-6d90-4bab-baa0-8868862c19bb","name":"Google Gemini Chat Model","type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","position":[-1540,2760],"parameters":{},"typeVersion":1},{"id":"96ca0d02-ce10-4d8f-8713-d667257020df","name":"Google Gemini Chat Model1","type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","position":[-880,2960],"parameters":{},"typeVersion":1},{"id":"ed512f2e-e731-49bf-b40e-1ca3a0c7e3d3","name":"Embeddings Google Gemini1","type":"@n8n/n8n-nodes-langchain.embeddingsGoogleGemini","position":[-1160,3100],"parameters":{},"typeVersion":1},{"id":"75f78adc-5c8c-46c5-ae8b-3875949f5b02","name":"Response","type":"n8n-nodes-base.set","position":[-2400,1860],"parameters":{},"typeVersion":3.4},{"id":"408a5c9f-5701-4b1b-aec3-cfb529ecd1a8","name":"Try Again","type":"n8n-nodes-base.set","position":[-2560,1960],"parameters":{},"typeVersion":3.4},{"id":"288504d0-7825-41d0-907f-bbd9630dc22c","name":"When Executed by Another Workflow","type":"n8n-nodes-base.executeWorkflowTrigger","position":[-3320,1900],"parameters":{},"typeVersion":1.1},{"id":"3791c0d1-e891-46f2-97cc-1689ba964d29","name":"Window Buffer Memory","type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","position":[-3200,2120],"parameters":{},"typeVersion":1.3},{"id":"4aff2b28-c7a0-43a4-93a4-c19388e4a99e","name":"Success","type":"n8n-nodes-base.set","position":[-420,1900],"parameters":{},"typeVersion":3.4},{"id":"ebe3cea4-3e83-45ac-9cd6-0d0b77aaf014","name":"Create Event with Attendee","type":"n8n-nodes-base.googleCalendarTool","position":[-900,2120],"parameters":{},"typeVersion":1.3},{"id":"ce3fadf3-67f2-459c-ad83-af9d1bf63d9a","name":"Create Event","type":"n8n-nodes-base.googleCalendarTool","position":[-780,2120],"parameters":{},"typeVersion":1.3},{"id":"d0a8b2eb-0271-48a4-86d3-b7a15324be29","name":"Get Events","type":"n8n-nodes-base.googleCalendarTool","position":[-660,2120],"parameters":{},"typeVersion":1.3},{"id":"8ee5ecce-5e16-41fa-9e77-952da0ec6f20","name":"Delete Event","type":"n8n-nodes-base.googleCalendarTool","position":[-540,2120],"parameters":{},"typeVersion":1.3},{"id":"c7049d60-8228-46a6-9de9-cc0a8d1c791a","name":"Update Event","type":"n8n-nodes-base.googleCalendarTool","position":[-420,2120],"parameters":{},"typeVersion":1.3},{"id":"479e125f-0f33-42a1-b37d-b53ad9d3356a","name":"Try Again1","type":"n8n-nodes-base.set","position":[-300,2060],"parameters":{},"typeVersion":3.4},{"id":"f1de23c7-9555-414f-ab81-dfd8c1c2e720","name":"Calendar Agent1","type":"@n8n/n8n-nodes-langchain.agent","onError":"continueErrorOutput","position":[-880,1900],"parameters":{},"typeVersion":1.6},{"id":"56adfe09-af36-4b66-b454-336d6f591fe7","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[-1100,1840],"parameters":{"content":""},"typeVersion":1},{"id":"48c70a18-c759-4520-9461-fb9d5f7964d5","name":"Google Gemini Chat Model2","type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","position":[-3320,2120],"parameters":{},"typeVersion":1},{"id":"1de0222a-a177-4675-b3e8-51cdc2285cbe","name":"Create Opportunity","type":"n8n-nodes-base.postgresTool","position":[-3080,2120],"parameters":{},"typeVersion":2.6},{"id":"77a4b506-64a3-4893-8399-0da8a8fa8d4d","name":"List Records","type":"n8n-nodes-base.postgresTool","position":[-2960,2120],"parameters":{},"typeVersion":2.6},{"id":"7dcc554a-68b1-4693-a19f-f12c8a65ebba","name":"Update Contact","type":"n8n-nodes-base.postgresTool","position":[-2840,2120],"parameters":{},"typeVersion":2.6},{"id":"781c5dc2-8915-464a-8bc9-ea0cf6c95695","name":"Delete Contact","type":"n8n-nodes-base.postgresTool","position":[-2600,2120],"parameters":{},"typeVersion":2.6},{"id":"9b3cdab0-3b2d-4fb8-b81f-f19f4ac569a7","name":"Delete Opportunity","type":"n8n-nodes-base.postgresTool","position":[-2480,2120],"parameters":{},"typeVersion":2.6},{"id":"ae5c08b8-ba8f-4456-9f42-5218952c1b0f","name":"Update Opportunity","type":"n8n-nodes-base.postgresTool","position":[-2360,2120],"parameters":{},"typeVersion":2.6},{"id":"266d49fe-40db-4639-8db0-2769f357a80a","name":"Google Gemini Chat Model3","type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","position":[-1020,2120],"parameters":{},"typeVersion":1},{"id":"14679e9a-da0d-49f4-a54c-252d7eda6f63","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","position":[-3420,1840],"parameters":{"content":""},"typeVersion":1},{"id":"7c63af09-7a41-4ad9-a69a-609f2b656243","name":"Create Contact","type":"n8n-nodes-base.postgresTool","position":[-2720,2120],"parameters":{},"typeVersion":2.6},{"id":"59d6fe5e-0737-4937-a511-b6736faf94a6","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","position":[-3420,2280],"parameters":{"content":""},"typeVersion":1},{"id":"db1b42a3-6fc0-4f26-a7ab-da49221e085b","name":"CRM Agent2","type":"@n8n/n8n-nodes-langchain.agent","onError":"continueErrorOutput","position":[-3060,1900],"parameters":{},"typeVersion":1.7},{"id":"15ad6a6f-6656-4bc0-86b0-093c3d262af1","name":"Simple Memory","type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","position":[-4380,3120],"parameters":{},"typeVersion":1.3},{"id":"40433c21-a918-4edc-94ec-77d79e24e2bc","name":"Create Charge","type":"n8n-nodes-base.stripeTool","position":[-4260,3120],"parameters":{},"typeVersion":1},{"id":"0eb2c1b7-d7df-4b7d-9582-fefbbdb70f28","name":"Create Discount Coupon","type":"n8n-nodes-base.stripeTool","position":[-4140,3120],"parameters":{},"typeVersion":1},{"id":"2dd8cb76-1435-4a4a-9873-e482b67e4814","name":"Get Customer Card","type":"n8n-nodes-base.stripeTool","position":[-4020,3120],"parameters":{},"typeVersion":1},{"id":"a80893fb-3fc2-4115-b42a-e2746e48cd96","name":"Get Customer","type":"n8n-nodes-base.stripeTool","position":[-3900,3120],"parameters":{},"typeVersion":1},{"id":"8fba2cfc-1999-4ce4-9141-52b2a17f2b49","name":"Create Customer","type":"n8n-nodes-base.stripeTool","position":[-3780,3120],"parameters":{},"typeVersion":1},{"id":"a9f53b19-ed50-478b-b56b-ed4d226fd0e2","name":"Update Customer","type":"n8n-nodes-base.stripeTool","position":[-3660,3120],"parameters":{},"typeVersion":1},{"id":"c3622cc6-260f-4add-8dc3-d791d5f652e9","name":"Delete Customer","type":"n8n-nodes-base.stripeTool","position":[-3540,3120],"parameters":{},"typeVersion":1},{"id":"f15d4a72-7a00-495e-bee5-f53131b12f93","name":"Google Gemini Chat Model4","type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","position":[-4500,3120],"parameters":{},"typeVersion":1},{"id":"2ded9423-c4a9-4652-a31b-0e6120dcb2b0","name":"Response1","type":"n8n-nodes-base.set","position":[-3660,2720],"parameters":{},"typeVersion":3.4},{"id":"d34db7c1-a2a3-48ce-888f-46486a921abe","name":"Try Again2","type":"n8n-nodes-base.set","position":[-3640,2920],"parameters":{},"typeVersion":3.4},{"id":"0215f430-64ca-41dd-8940-76cd7d2bd271","name":"Billing Agent","type":"@n8n/n8n-nodes-langchain.toolWorkflow","position":[-780,2760],"parameters":{},"typeVersion":2.1},{"id":"7da4747e-d01e-4b96-97f1-15df1b2d1685","name":"Billing Agent1","type":"@n8n/n8n-nodes-langchain.agent","position":[-4100,2900],"parameters":{},"typeVersion":1.9},{"id":"47b76f97-6326-4361-9a2b-fd5e3c2e47aa","name":"technical_and_sales_knowledge","type":"@n8n/n8n-nodes-langchain.toolVectorStore","position":[-1060,2760],"parameters":{},"typeVersion":1,"alwaysOutputData":true},{"id":"08a31dfb-8f53-4e27-89a0-417fe59ed17e","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","position":[-4560,2700],"parameters":{"content":""},"typeVersion":1},{"id":"cb7da763-6728-41c7-ac66-21980c06b761","name":"Sticky Note5","type":"n8n-nodes-base.stickyNote","position":[-4560,1840],"parameters":{"content":""},"typeVersion":1},{"id":"6a1a3165-11e6-47db-8d67-d58330d9bdc9","name":"Create Contact1","type":"n8n-nodes-base.postgres","position":[-1900,2000],"parameters":{},"typeVersion":2.6}],"pinData":{"When Executed by Another Workflow":[{"query":"Create or update contact for Ben with email Ben@Ben.com and record interest in Ceramic Coating for appearance enhancement."}]},"connections":{"Gemini":{"ai_languageModel":[[{"node":"Personalised First Message","type":"ai_languageModel","index":0}]]},"OpenAI":{"main":[[{"node":"Edit Fields - chat2","type":"main","index":0}]]},"Switch":{"main":[[{"node":"Reply To  User","type":"main","index":0}],[{"node":"Output - chat","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"Switch","type":"main","index":0}]]},"Get Lead":{"main":[[{"node":"Handle Message Types","type":"main","index":0}]]},"WhatsApp":{"main":[[{"node":"Get Lead","type":"main","index":0}]]},"CRM Agent":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"CRM Agent2":{"main":[[{"node":"Response","type":"main","index":0}],[{"node":"Try Again","type":"main","index":0}]]},"Get Events":{"ai_tool":[[{"node":"Calendar Agent1","type":"ai_tool","index":0}]]},"Contact Form":{"main":[[{"node":"Create Contact1","type":"main","index":0}]]},"Create Event":{"ai_tool":[[{"node":"Calendar Agent1","type":"ai_tool","index":0}]]},"Delete Event":{"ai_tool":[[{"node":"Calendar Agent1","type":"ai_tool","index":0}]]},"Get Customer":{"ai_tool":[[{"node":"Billing Agent1","type":"ai_tool","index":0}]]},"HTTP Request":{"main":[[{"node":"OpenAI","type":"main","index":0}]]},"List Records":{"ai_tool":[[{"node":"CRM Agent2","type":"ai_tool","index":0}]]},"Update Event":{"ai_tool":[[{"node":"Calendar Agent1","type":"ai_tool","index":0}]]},"Billing Agent":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Create Charge":{"ai_tool":[[{"node":"Billing Agent1","type":"ai_tool","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"Billing Agent1","type":"ai_memory","index":0}]]},"Billing Agent1":{"main":[[{"node":"Response1","type":"main","index":0},{"node":"Try Again2","type":"main","index":0}]]},"Calendar Agent":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Create Contact":{"ai_tool":[[{"node":"CRM Agent2","type":"ai_tool","index":0}]]},"Delete Contact":{"ai_tool":[[{"node":"CRM Agent2","type":"ai_tool","index":0}]]},"Update Contact":{"ai_tool":[[{"node":"CRM Agent2","type":"ai_tool","index":0}]]},"Calendar Agent1":{"main":[[{"node":"Success","type":"main","index":0}],[{"node":"Try Again1","type":"main","index":0}]]},"Create Contact1":{"main":[[{"node":"Personalised First Message","type":"main","index":0}]]},"Create Customer":{"ai_tool":[[{"node":"Billing Agent1","type":"ai_tool","index":0}]]},"Delete Customer":{"ai_tool":[[{"node":"Billing Agent1","type":"ai_tool","index":0}]]},"Update Customer":{"ai_tool":[[{"node":"Billing Agent1","type":"ai_tool","index":0}]]},"Get Customer Card":{"ai_tool":[[{"node":"Billing Agent1","type":"ai_tool","index":0}]]},"Create Opportunity":{"ai_tool":[[{"node":"CRM Agent2","type":"ai_tool","index":0}]]},"Delete Opportunity":{"ai_tool":[[{"node":"CRM Agent2","type":"ai_tool","index":0}]]},"Update Opportunity":{"ai_tool":[[{"node":"CRM Agent2","type":"ai_tool","index":0}]]},"Edit Fields - chat1":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}]]},"Edit Fields - chat2":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}]]},"Handle Message Types":{"main":[[{"node":"Edit Fields - chat1","type":"main","index":0}],[{"node":"WhatsApp Business Cloud","type":"main","index":0}],[{"node":"Reply To User1","type":"main","index":0}]]},"Postgres Chat Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"Window Buffer Memory":{"ai_memory":[[{"node":"CRM Agent2","type":"ai_memory","index":0}]]},"Create Discount Coupon":{"ai_tool":[[{"node":"Billing Agent1","type":"ai_tool","index":0}]]},"Postgres PGVector Store":{"ai_vectorStore":[[{"node":"technical_and_sales_knowledge","type":"ai_vectorStore","index":0}]]},"WhatsApp Business Cloud":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"No Operation, do nothing":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Embeddings Google Gemini1":{"ai_embedding":[[{"node":"Postgres PGVector Store","type":"ai_embedding","index":0}]]},"Google Gemini Chat Model1":{"ai_languageModel":[[{"node":"technical_and_sales_knowledge","type":"ai_languageModel","index":0}]]},"Google Gemini Chat Model2":{"ai_languageModel":[[{"node":"CRM Agent2","type":"ai_languageModel","index":0}]]},"Google Gemini Chat Model3":{"ai_languageModel":[[{"node":"Calendar Agent1","type":"ai_languageModel","index":0}]]},"Google Gemini Chat Model4":{"ai_languageModel":[[{"node":"Billing Agent1","type":"ai_languageModel","index":0}]]},"Create Event with Attendee":{"ai_tool":[[{"node":"Calendar Agent1","type":"ai_tool","index":0}]]},"Personalised First Message":{"main":[[{"node":"Send First Message","type":"main","index":0}]]},"When chat message received":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}]]},"technical_and_sales_knowledge":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"CRM Agent2","type":"main","index":0}]]}}}