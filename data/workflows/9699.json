{"name":"AI Contact Enrichment","tags":[{"id":"customer-support","name":"customer-support","createdAt":"2025-01-14T00:00:00.000Z","updatedAt":"2025-01-14T00:00:00.000Z"},{"id":"ai-automation","name":"ai-automation","createdAt":"2025-01-14T00:00:00.000Z","updatedAt":"2025-01-14T00:00:00.000Z"}],"nodes":[{"id":"webhook-trigger","name":"Webhook Trigger","type":"n8n-nodes-base.webhook","position":[250,300],"webhookId":"contact-enrichment-webhook","parameters":{"path":"contact-enrichment","options":{}},"typeVersion":1},{"id":"process-data","name":"Process Data","type":"n8n-nodes-base.code","position":[450,300],"parameters":{"functionCode":"// Extract and process data\nconst data = {\n  id: Date.now().toString(),\n  ...$input.item.json,\n  timestamp: new Date().toISOString()\n};\nreturn { json: data };"},"typeVersion":2},{"id":"prepare-ai","name":"Prepare AI Request","type":"n8n-nodes-base.code","position":[650,300],"parameters":{"functionCode":"// AI Configuration\nconst aiConfig = {\n  provider: $env.AI_PROVIDER || 'openai',\n  apiKey: $env.AI_API_KEY,\n  model: $env.AI_MODEL || 'gpt-3.5-turbo',\n  endpoint: $env.AI_ENDPOINT\n};\nreturn { json: { aiConfig, data: $json } };"},"typeVersion":2},{"id":"call-ai","name":"Call AI API","type":"n8n-nodes-base.httpRequest","position":[850,300],"parameters":{"url":"={{$json.aiConfig.provider === 'openai' ? 'https://api.openai.com/v1/chat/completions' : $json.aiConfig.endpoint}}","method":"POST","sendBody":true,"sendHeaders":true,"authentication":"genericCredentialType","bodyParameters":{"parameters":[{"name":"model","value":"={{$json.aiConfig.model}}"},{"name":"messages","value":"={{JSON.stringify([{role: 'user', content: JSON.stringify($json.data)}])}}"}]},"genericAuthType":"httpHeaderAuth","headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"},{"name":"Authorization","value":"=Bearer {{$json.aiConfig.apiKey}}"}]}},"typeVersion":4},{"id":"save-to-db","name":"Save to Supabase","type":"n8n-nodes-base.supabase","position":[1050,300],"parameters":{"table":"workflow_logs","values":"=AI Contact Enrichment,={{JSON.stringify($json)}},={{JSON.stringify($json)}},={{new Date().toISOString()}}","columns":"workflow_name,data,ai_response,created_at","operation":"insert"},"credentials":{"supabaseApi":{"id":"supabase-credentials","name":"Supabase API"}},"typeVersion":1},{"id":"format-response","name":"Format Response","type":"n8n-nodes-base.code","position":[1250,300],"parameters":{"functionCode":"return { json: { success: true, workflow: 'AI Contact Enrichment', timestamp: new Date().toISOString() } };"},"typeVersion":2},{"id":"sticky-overview","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[240,60],"parameters":{"width":380,"height":380,"content":"## üîç AI Contact Enrichment Workflow\n\n**Purpose:** Automatically enhance contact data with AI-powered insights including job roles, company details, and persona analysis.\n\n**Key Features:**\n‚úÖ Universal AI provider support (OpenAI, Anthropic, etc.)\n‚úÖ Enrich partial contact data\n‚úÖ Generate buyer personas\n‚úÖ Automatic data logging to Supabase\n‚úÖ Perfect for sales & marketing teams"},"typeVersion":1},{"id":"sticky-setup","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[640,60],"parameters":{"width":360,"height":380,"content":"## üìã Setup Required\n\n**Environment Variables:**\n‚Ä¢ AI_PROVIDER (openai/anthropic/etc.)\n‚Ä¢ AI_API_KEY\n‚Ä¢ AI_MODEL (gpt-3.5-turbo/gpt-4)\n‚Ä¢ AI_ENDPOINT (for custom providers)\n\n**Credentials:**\n‚Ä¢ Supabase API credentials\n\n**Database:**\n‚Ä¢ Table: workflow_logs\n‚Ä¢ Columns: workflow_name, data, ai_response, created_at"},"typeVersion":1},{"id":"sticky-flow","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","position":[1040,60],"parameters":{"width":340,"height":300,"content":"## üîÑ Workflow Flow\n\n1Ô∏è‚É£ Webhook receives contact data\n2Ô∏è‚É£ Data is processed and timestamped\n3Ô∏è‚É£ AI configuration prepared from env vars\n4Ô∏è‚É£ AI enriches contact with insights\n5Ô∏è‚É£ Enriched data logged to Supabase\n6Ô∏è‚É£ Success response returned\n\n**Output:** Enhanced contact profile with insights"},"typeVersion":1}],"settings":{"executionOrder":"v1"},"updatedAt":"2025-01-14T00:00:00.000Z","versionId":"1","staticData":null,"connections":{"Call AI API":{"main":[[{"node":"Save to Supabase","type":"main","index":0}]]},"Process Data":{"main":[[{"node":"Prepare AI Request","type":"main","index":0}]]},"Webhook Trigger":{"main":[[{"node":"Process Data","type":"main","index":0}]]},"Save to Supabase":{"main":[[{"node":"Format Response","type":"main","index":0}]]},"Prepare AI Request":{"main":[[{"node":"Call AI API","type":"main","index":0}]]}},"triggerCount":1}