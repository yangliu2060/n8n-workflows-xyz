{"meta":{"instanceId":"84b390fbc5fa25072285b148d9fdc04a69134c7197b10b734c5b01fb008ddd54","templateCredsSetupCompleted":true},"nodes":[{"id":"3c2c13bb-d14d-42bb-a621-ec7c0048da93","name":"Google Calendar Trigger","type":"n8n-nodes-base.googleCalendarTrigger","position":[-2272,304],"parameters":{"options":{},"pollTimes":{"item":[{"mode":"everyMinute"}]},"triggerOn":"eventStarted","calendarId":{"__rl":true,"mode":"list","value":" ","cachedResultName":" "}},"credentials":{"googleCalendarOAuth2Api":{"id":" ","name":" "}},"typeVersion":1},{"id":"57c828f7-42c3-42f0-a820-c1d1f0a07798","name":"If","type":"n8n-nodes-base.if","position":[-704,80],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"or","conditions":[{"id":"f5c0d425-c86e-4456-b272-0ade1b6d747d","operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json.forecast }}","rightValue":"%"},{"id":"95a2f60e-c880-4ec9-b810-3e53fdf3642b","operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json.forecast }}","rightValue":"K"},{"id":"c59e9ffc-8e0d-457a-a247-b3388bed9780","operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json.forecast }}","rightValue":"M"},{"id":"75aee0fb-55d7-4965-a364-877edf9bf215","operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json.forecast }}","rightValue":"B"},{"id":"2319659f-6637-4476-a0ee-c45fb880c231","operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json.forecast }}","rightValue":"T"}]}},"typeVersion":2.2},{"id":"2aa9b501-f707-4d14-9f44-00cbdddf55a2","name":"To Number","type":"n8n-nodes-base.set","position":[-480,176],"parameters":{"options":{},"assignments":{"assignments":[{"id":"3c47e85b-5eae-4c49-8569-8e875cab9f70","name":"actual","type":"number","value":"={{ $json.actual.toNumber() }}"},{"id":"3c36f4c5-79e9-4864-af35-a8421e15f3a0","name":"forecast","type":"number","value":"={{ $json.forecast.toNumber() }}"}]},"includeOtherFields":true},"typeVersion":3.4},{"id":"21cfbca8-5b28-4870-924b-63ae93f1c292","name":"Get Actual Data?","type":"n8n-nodes-base.if","position":[-1152,128],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"or","conditions":[{"id":"13f60780-09c2-432e-9e80-a69212f27682","operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json.data.modelResponse.scrapedContent.text.substring($json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+29, $json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+140)  }}","rightValue":"={{ $('Get News Details').item.json.month+\" \"+$('Get News Details').item.json.day+\", \"+$('Get News Details').item.json.year }}"},{"id":"ce61b3b3-19c1-4dbc-b985-41d0f084fb79","operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json.data.modelResponse.scrapedContent.text.substring($json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+29, $json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+140)  }}","rightValue":"={{ $('Get News Details').item.json.month+\" \"+$('Get News Details').item.json['day-1']+\", \"+$('Get News Details').item.json.year }}"},{"id":"a0ac0845-f24f-476b-a25c-40aba9662561","operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json.data.modelResponse.scrapedContent.text.substring($json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+29, $json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+140)  }}","rightValue":"={{ $('Get News Details').item.json['month-1']+\" \"+\"28\"+\", \"+$('Get News Details').item.json.year }}"},{"id":"b2b89cec-1f73-4fa0-8360-2a6d94e22f79","operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json.data.modelResponse.scrapedContent.text.substring($json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+29, $json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+140)  }}","rightValue":"={{ $('Get News Details').item.json['month-1']+\" \"+\"29\"+\", \"+$('Get News Details').item.json.year }}"},{"id":"035adc96-e70d-4819-bd6a-961fc1327a41","operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json.data.modelResponse.scrapedContent.text.substring($json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+29, $json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+140)  }}","rightValue":"={{ $('Get News Details').item.json['month-1']+\" \"+\"30\"+\", \"+$('Get News Details').item.json.year }}"},{"id":"bfb56a75-23f3-4d4d-bdc3-c77cf1bfcdb7","operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json.data.modelResponse.scrapedContent.text.substring($json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+29, $json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+140)  }}","rightValue":"={{ $('Get News Details').item.json['month-1']+\" \"+\"31\"+\", \"+$('Get News Details').item.json.year }}"}]}},"typeVersion":2.2},{"id":"0debd2af-365f-400e-8851-7d7985743d2c","name":"Actual, Forecast Value","type":"n8n-nodes-base.set","position":[-928,80],"parameters":{"options":{},"assignments":{"assignments":[{"id":"f98f97f1-f9cd-4a4a-a987-79bf7cefd75c","name":"actual","type":"string","value":"={{ $if($json.data.modelResponse.scrapedContent.text.substring($json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+29, $json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+135).split(\" | \")[1].includes(\"\\\\\"),$json.data.modelResponse.scrapedContent.text.substring($json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+29, $json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+135).split(\" | \")[1].replace(\"\\\\\",\"\"),$json.data.modelResponse.scrapedContent.text.substring($json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+29, $json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+135).split(\" | \")[1]) }}"},{"id":"0f1aaafa-b164-4f5b-8efa-0bf0adde1750","name":"forecast","type":"string","value":"={{ $if($json.data.modelResponse.scrapedContent.text.substring($json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+29, $json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+135).split(\" | \")[2].includes(\"\\\\\"),$json.data.modelResponse.scrapedContent.text.substring($json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+29, $json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+135).split(\" | \")[2].replace(\"\\\\\",\"\"),$json.data.modelResponse.scrapedContent.text.substring($json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+29, $json.data.modelResponse.scrapedContent.text.indexOf(\"| --- | --- | --- | --- |\")+135).split(\" | \")[2]) }}"},{"id":"51802300-10bc-485d-b7aa-fa1a237ef345","name":"currency","type":"string","value":"={{ $('Get News Details').item.json.currency }}"}]},"includeOtherFields":true},"typeVersion":3.4},{"id":"562a7263-309d-4f6e-94b7-df7254e0f8ba","name":"Delete %KMBT, To Number","type":"n8n-nodes-base.set","position":[-480,-16],"parameters":{"options":{},"assignments":{"assignments":[{"id":"09efa7c8-fda5-4b95-be29-354d7568cb90","name":"actual","type":"number","value":"={{ $json.actual.substring(0, $json.actual.length-1).toNumber() }}"},{"id":"7af14224-e13e-43e0-bbc7-f4b4052ac0e9","name":"forecast","type":"number","value":"={{ $json.forecast.substring(0,$json.forecast.length-1).toNumber() }}"}]},"includeOtherFields":true},"typeVersion":3.4},{"id":"418434c1-a43d-4cde-ab6d-64d1cbedc072","name":"'Actual' less than 'Forecast' is good for currency?","type":"n8n-nodes-base.if","position":[-256,80],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"eb3a077d-03ab-4b01-bee6-6963302255e1","operator":{"type":"string","operation":"contains"},"leftValue":"={{ $('Actual, Forecast Value').item.json.data.modelResponse.scrapedContent.text }}","rightValue":"'Actual' less than 'Forecast' is good for currency;"}]}},"typeVersion":2.2},{"id":"580827cf-885f-467b-bb68-77e562c9a86c","name":"IF Has Forecast","type":"n8n-nodes-base.if","position":[-2048,304],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"5f6b43c6-bb28-4ab1-a0c8-57d2da8308b6","operator":{"type":"string","operation":"contains"},"leftValue":"={{ $json.description }}","rightValue":"Forecast: "}]}},"typeVersion":2.2},{"id":"98c03766-050d-4c39-9790-91f6ddb866c6","name":"No Operation, do nothing1","type":"n8n-nodes-base.noOp","position":[-1824,400],"parameters":{},"typeVersion":1},{"id":"390c20f9-4272-4d5c-91ba-edbf54e0fbbe","name":"Get News Details","type":"n8n-nodes-base.set","position":[-1824,208],"parameters":{"options":{"ignoreConversionErrors":true},"assignments":{"assignments":[{"id":"890b530e-df58-414a-98b9-0c0b18796749","name":"newsLink","type":"string","value":"={{ $json.description.extractUrl() }}"},{"id":"08e16e2f-7731-420c-bb41-705b784cb740","name":"forecast","type":"string","value":"={{ $json.description.split(\"\\\\n\\\\n\")[1].split(\" \")[1] }}"},{"id":"c36de21c-1e9b-46da-8f8f-740f8f001239","name":"previous","type":"string","value":"={{ $json.description.split(\"\\\\n\\\\n\")[2].split(\" \")[1] }}"},{"id":"a34addab-19bd-4efd-a347-dbc37722e181","name":"year","type":"string","value":"={{ $json.start.dateTime.substring(0, 4).toNumber() }}"},{"id":"d3954244-99af-466f-b5e8-bbce6417d783","name":"month","type":"string","value":"={{ $if($json.start.dateTime.substring(5, 7).toNumber() == \"1\",\"Jan\",$if($json.start.dateTime.substring(5, 7).toNumber() == \"2\",\"Feb\",$if($json.start.dateTime.substring(5, 7).toNumber() == \"3\",\"Mar\",$if($json.start.dateTime.substring(5, 7).toNumber() == \"4\",\"Apr\",$if($json.start.dateTime.substring(5, 7).toNumber() == \"5\",\"May\",$if($json.start.dateTime.substring(5, 7).toNumber() == \"6\",\"Jun\",$if($json.start.dateTime.substring(5, 7).toNumber() == \"7\",\"Jul\",$if($json.start.dateTime.substring(5, 7).toNumber() == \"8\",\"Aug\",$if($json.start.dateTime.substring(5, 7).toNumber() == \"9\",\"Sep\",$if($json.start.dateTime.substring(5, 7).toNumber() == \"10\",\"Oct\",$if($json.start.dateTime.substring(5, 7).toNumber() == \"11\",\"Nov\",\"Dec\"))))))))))) }}"},{"id":"463fb1ff-03ef-46d0-a33f-04de1d2d8c32","name":"month-1","type":"string","value":"={{ $if($json.start.dateTime.substring(5, 7).toNumber()-1 == \"1\",\"Jan\",$if($json.start.dateTime.substring(5, 7).toNumber()-1 == \"2\",\"Feb\",$if($json.start.dateTime.substring(5, 7).toNumber()-1 == \"3\",\"Mar\",$if($json.start.dateTime.substring(5, 7).toNumber()-1 == \"4\",\"Apr\",$if($json.start.dateTime.substring(5, 7).toNumber()-1 == \"5\",\"May\",$if($json.start.dateTime.substring(5, 7).toNumber()-1 == \"6\",\"Jun\",$if($json.start.dateTime.substring(5, 7).toNumber()-1 == \"7\",\"Jul\",$if($json.start.dateTime.substring(5, 7).toNumber()-1 == \"8\",\"Aug\",$if($json.start.dateTime.substring(5, 7).toNumber()-1 == \"9\",\"Sep\",$if($json.start.dateTime.substring(5, 7).toNumber()-1 == \"10\",\"Oct\",$if($json.start.dateTime.substring(5, 7).toNumber()-1 == \"11\",\"Nov\",\"Dec\"))))))))))) }}"},{"id":"53a1391a-1eb7-4eef-ace0-4df75a4b7f56","name":"day","type":"string","value":"={{ $json.start.dateTime.substring(8, 10).toNumber() }}"},{"id":"053228c0-6a3f-419f-85fd-0cd935e0677b","name":"day-1","type":"string","value":"={{ $if($json.start.dateTime.substring(8, 10).toNumber()-1 == 0, \"30\", $json.start.dateTime.substring(8, 10).toNumber()-1) }}"},{"id":"876b25b1-121e-445f-a3c0-f9704a539e44","name":"currency","type":"string","value":"={{\n$if($json.summary.split(\" \")[1] == \"US\",\"USD\",\n$if($json.summary.split(\" \")[1] == \"AU\",\"AUD\",\n$if($json.summary.split(\" \")[1] == \"CA\",\"CAD\",\n$if($json.summary.split(\" \")[1] == \"SZ\",\"CHF\",\n$if($json.summary.split(\" \")[1] == \"UK\",\"GBP\",\n$if($json.summary.split(\" \")[1] == \"JN\",\"JPY\",\n$if($json.summary.split(\" \")[1] == \"NZ\",\"NZD\",\n$if($json.summary.split(\" \")[1] == \"GE\" || $json.summary.split(\" \")[1] == \"BE\" || $json.summary.split(\" \")[1] == \"EZ\" || $json.summary.split(\" \")[1] == \"IT\" || $json.summary.split(\" \")[1] == \"FR\" || $json.summary.split(\" \")[1] == \"SP\" ,\"EUR\", \"XXX\"\n))))))))\n}}"},{"id":"3404bca5-0c9c-4c0e-b7d2-f2e1f8386e02","name":"impact","type":"string","value":"={{ $json.description.split(\"\\\\n\\\\n\")[0].split(\" \")[1] }}"}]},"includeOtherFields":true},"typeVersion":3.4},{"id":"177f08e5-4c3c-479f-b027-6bbad7d3ffeb","name":"Scrape News Link","type":"n8n-nodes-base.airtop","position":[-1376,208],"parameters":{"url":"={{ $json.newsLink }}","resource":"extraction","operation":"scrape","sessionMode":"new"},"credentials":{"airtopApi":{"id":" ","name":" "}},"typeVersion":1},{"id":"7b022b9a-cf2b-44f6-851b-d1e34d6bc33f","name":"Wait 10s","type":"n8n-nodes-base.wait","position":[-1600,208],"webhookId":"cf220a05-a707-4817-bc93-c6217fe291c6","parameters":{"amount":10},"typeVersion":1.1},{"id":"525d826e-57fc-4534-82b5-dc14690d1495","name":"Wait 5s","type":"n8n-nodes-base.wait","position":[-928,304],"webhookId":"bc382f09-d47b-4067-9046-58cce03e2ac3","parameters":{},"typeVersion":1.1},{"id":"3a8ab482-014f-49ba-bd5f-6c513d07bf61","name":"Less Good","type":"n8n-nodes-base.telegram","position":[-32,-16],"webhookId":"f4651d91-1eed-4995-9e3c-87bcb8f62521","parameters":{"text":"={{ $('Google Calendar Trigger').item.json.summary+\"\\nImpact: \"+$('Get News Details').item.json.impact+\"\\n\"+\n\"Actual: \"+$json.actual+\"\\n\"+\n\"Forecast: \"+$json.forecast+\"\\n\"+\n$if($json.actual == $json.forecast,\"NEUTRAL for \"+$json.currency,\n$if($json.actual < $json.forecast,\"GOOD for \"+$json.currency,\"BAD for \"+$json.currency))}}","chatId":"384952998","additionalFields":{"appendAttribution":false}},"credentials":{"telegramApi":{"id":" ","name":" "}},"typeVersion":1.2},{"id":"092077a2-b997-4fba-964f-5abd9192cf6a","name":"Greater Good","type":"n8n-nodes-base.telegram","position":[-32,176],"webhookId":"ad1aee01-8953-46e0-b5ff-2ee4197ba8c7","parameters":{"text":"={{ $('Google Calendar Trigger').item.json.summary+\"\\nImpact: \"+$('Get News Details').item.json.impact+\"\\n\"+\n\"Actual: \"+$json.actual+\"\\n\"+\n\"Forecast: \"+$json.forecast+\"\\n\"+\n$if($json.actual == $json.forecast,\"NEUTRAL for \"+$json.currency,\n$if($json.actual > $json.forecast,\"GOOD for \"+$json.currency,\"BAD for \"+$json.currency))}}","chatId":"384952998","additionalFields":{"appendAttribution":false}},"credentials":{"telegramApi":{"id":" ","name":" "}},"typeVersion":1.2},{"id":"800c76a1-5417-4a05-b80b-dbebed96ed01","name":"No Operation, do nothing","type":"n8n-nodes-base.noOp","position":[192,80],"parameters":{},"typeVersion":1}],"pinData":{},"connections":{"If":{"main":[[{"node":"Delete %KMBT, To Number","type":"main","index":0}],[{"node":"To Number","type":"main","index":0}]]},"Wait 5s":{"main":[[{"node":"Scrape News Link","type":"main","index":0}]]},"Wait 10s":{"main":[[{"node":"Scrape News Link","type":"main","index":0}]]},"Less Good":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}]]},"To Number":{"main":[[{"node":"'Actual' less than 'Forecast' is good for currency?","type":"main","index":0}]]},"Greater Good":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}]]},"IF Has Forecast":{"main":[[{"node":"Get News Details","type":"main","index":0}],[{"node":"No Operation, do nothing1","type":"main","index":0}]]},"Get Actual Data?":{"main":[[{"node":"Actual, Forecast Value","type":"main","index":0}],[{"node":"Wait 5s","type":"main","index":0}]]},"Get News Details":{"main":[[{"node":"Wait 10s","type":"main","index":0}]]},"Scrape News Link":{"main":[[{"node":"Get Actual Data?","type":"main","index":0}]]},"Actual, Forecast Value":{"main":[[{"node":"If","type":"main","index":0}]]},"Delete %KMBT, To Number":{"main":[[{"node":"'Actual' less than 'Forecast' is good for currency?","type":"main","index":0}]]},"Google Calendar Trigger":{"main":[[{"node":"IF Has Forecast","type":"main","index":0}]]},"'Actual' less than 'Forecast' is good for currency?":{"main":[[{"node":"Less Good","type":"main","index":0}],[{"node":"Greater Good","type":"main","index":0}]]}}}