{"id":"fGSgxvT4oxPB2QtC","meta":{"instanceId":"aa8f1cf0c4d8087e25a2eea962da249799481d2fb992314793977a97a5e71d77","templateCredsSetupCompleted":true},"name":"My workflow 3","tags":[],"nodes":[{"id":"803334ae-8858-402a-a572-d8a0bbc53c75","name":"Get Google Drive ID","type":"n8n-nodes-base.set","position":[-288,400],"parameters":{"options":{},"assignments":{"assignments":[{"id":"a1750d20-2f6e-4826-80b8-654d0985120d","name":"final_google_drive_url","type":"string","value":"={{ $json['Media URL'].match(/https:\\/\\/drive\\.google\\.com\\/file\\/d\\/([A-Za-z0-9_-]+)/i)[1]  }}"}]}},"typeVersion":3.4},{"id":"2a36e1fd-0949-44c6-984e-c545cf0454d8","name":"URL VIDEO to Post","type":"n8n-nodes-base.googleSheets","position":[-304,192],"parameters":{"options":{},"sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1TgAOn_dRUwEQFlWtNXFxXj72SVqPuMIMZ85dwsjcuG0/edit#gid=0","cachedResultName":"Sheet1"},"documentId":{"__rl":true,"mode":"list","value":"1TgAOn_dRUwEQFlWtNXFxXj72SVqPuMIMZ85dwsjcuG0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1TgAOn_dRUwEQFlWtNXFxXj72SVqPuMIMZ85dwsjcuG0/edit?usp=drivesdk","cachedResultName":"Handsome warden TikTok"}},"credentials":{"googleSheetsOAuth2Api":{"id":"bAnK8T185A3Wr7Kj","name":"Google Sheets account"}},"typeVersion":4.5},{"id":"b58b9863-09df-4cce-a6c9-ab94c971b408","name":"Upload Video to BLOTATO","type":"@blotato/n8n-nodes-blotato.blotato","position":[-432,608],"parameters":{"mediaUrl":"=https://drive.google.com/uc?export=download&id={{ $('Get Google Drive ID').item.json.final_google_drive_url }}","resource":"media"},"credentials":{"blotatoApi":{"id":"6sPTZyXKAaTQFB4O","name":"Blotato API Account"}},"typeVersion":2},{"id":"fda25ce7-dcba-413e-bc46-894a09924bf0","name":"Tiktok","type":"@blotato/n8n-nodes-blotato.blotato","position":[-272,608],"parameters":{"options":{},"platform":"tiktok","accountId":{"__rl":true,"mode":"list","value":"13117","cachedResultUrl":"https://backend.blotato.com/v2/accounts/13117","cachedResultName":"handsomewarden"},"postContentText":"={{ $('URL VIDEO to Post').item.json.Caption }}","postContentMediaUrls":"={{ $json.url }}"},"credentials":{"blotatoApi":{"id":"6sPTZyXKAaTQFB4O","name":"Blotato API Account"}},"typeVersion":2},{"id":"ef03626b-2726-424b-9324-7dc308a14c1a","name":"Update Status to \"DONE\"","type":"n8n-nodes-base.googleSheets","position":[-112,608],"parameters":{"columns":{"value":{"ID":"={{ $('URL VIDEO to Post').item.json.ID }}","Status":"posted"},"schema":[{"id":"ID","type":"string","display":true,"removed":false,"required":false,"displayName":"ID","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Title","type":"string","display":true,"removed":true,"required":false,"displayName":"Title","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Media URL","type":"string","display":true,"removed":true,"required":false,"displayName":"Media URL","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Caption","type":"string","display":true,"removed":true,"required":false,"displayName":"Caption","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Status","type":"string","display":true,"removed":false,"required":false,"displayName":"Status","defaultMatch":false,"canBeUsedToMatch":true},{"id":"row_number","type":"number","display":true,"removed":true,"readOnly":true,"required":false,"displayName":"row_number","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":["ID"],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{},"operation":"update","sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1TgAOn_dRUwEQFlWtNXFxXj72SVqPuMIMZ85dwsjcuG0/edit#gid=0","cachedResultName":"Sheet1"},"documentId":{"__rl":true,"mode":"list","value":"1TgAOn_dRUwEQFlWtNXFxXj72SVqPuMIMZ85dwsjcuG0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1TgAOn_dRUwEQFlWtNXFxXj72SVqPuMIMZ85dwsjcuG0/edit?usp=drivesdk","cachedResultName":"Handsome warden TikTok"}},"credentials":{"googleSheetsOAuth2Api":{"id":"bAnK8T185A3Wr7Kj","name":"Google Sheets account"}},"typeVersion":4.5},{"id":"48004fda-d785-4891-a99b-42e1bfc75f20","name":"If","type":"n8n-nodes-base.if","position":[-144,192],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"bc74b0c2-aa46-4bcd-91f3-1eb6b0720167","operator":{"name":"filter.operator.equals","type":"string","operation":"equals"},"leftValue":"={{ $json.Status }}","rightValue":"pending"}]}},"typeVersion":2.2},{"id":"8abafc8d-b429-485b-840f-a4a4cc25cf28","name":"Limit","type":"n8n-nodes-base.limit","position":[-432,400],"parameters":{},"typeVersion":1},{"id":"f0905405-fb5d-4a4b-b67e-76a2a6980962","name":"Schedule Trigger","type":"n8n-nodes-base.scheduleTrigger","position":[-464,192],"parameters":{"rule":{"interval":[{"field":"hours"}]}},"executeOnce":false,"retryOnFail":false,"typeVersion":1.2,"alwaysOutputData":false},{"id":"d48267e8-d01e-4035-99ed-4f646afe8784","name":"Share file","type":"n8n-nodes-base.googleDrive","position":[-160,400],"parameters":{"fileId":{"__rl":true,"mode":"id","value":"={{ $json.final_google_drive_url }}"},"options":{},"operation":"share","permissionsUi":{"permissionsValues":{"role":"reader","type":"anyone"}}},"credentials":{"googleDriveOAuth2Api":{"id":"1Bnhm02w1dxE4FO6","name":"Farooq Google Drive account"}},"typeVersion":3},{"id":"362862ae-f47f-465a-a771-ae8c408cae94","name":"üìã DATA RETRIEVAL & FILTERING","type":"n8n-nodes-base.stickyNote","position":[-976,160],"parameters":{"width":464,"height":736,"content":"**Data Retrieval & Filtering Section**\n\nThis section fetches video data from Google Sheets and filters for pending posts only.\n\n‚Ä¢ Schedule Trigger: Runs every hour\n‚Ä¢ Google Sheets: Retrieves video data\n‚Ä¢ If Node: Filters for 'pending' status\n‚Ä¢ Limit: Processes 1 video at a time to avoid rate limits\n\n**‚ö†Ô∏è IMPORTANT REQUIREMENTS**\n\n‚Ä¢ **Self-hosted n8n only** (community nodes required)\n‚Ä¢ Google Sheets with columns: ID, Title, Media URL, Caption, Status\n‚Ä¢ Blotato API account for TikTok posting\n‚Ä¢ Google Drive & Sheets OAuth2 credentials\n‚Ä¢ Videos must be stored in Google Drive\n‚Ä¢ Status must be set to 'pending' for processing\n\n**Video Processing Section**\n\nThis section handles video file preparation for posting.\n\n‚Ä¢ Get Google Drive ID: Extracts file ID from URL\n‚Ä¢ Share File: Makes Google Drive file publicly accessible\n‚Ä¢ Upload to Blotato: Transfers video to Blotato platform\n\n**TikTok Posting & Tracking Section**\n\nThis section handles the actual posting and status updates.\n\n‚Ä¢ TikTok Node: Posts video with caption to TikTok\n‚Ä¢ Update Status: Marks post as 'posted' in Google Sheets\n\n**Note:** Ensure your Blotato API credentials are properly configured."},"typeVersion":1}],"active":false,"pinData":{},"settings":{"executionOrder":"v1"},"versionId":"d94c0d1f-9d93-4e80-a59a-514f08033055","connections":{"If":{"main":[[{"node":"Limit","type":"main","index":0}]]},"Limit":{"main":[[{"node":"Get Google Drive ID","type":"main","index":0}]]},"Tiktok":{"main":[[{"node":"Update Status to \"DONE\"","type":"main","index":0}]]},"Share file":{"main":[[{"node":"Upload Video to BLOTATO","type":"main","index":0}]]},"Schedule Trigger":{"main":[[{"node":"URL VIDEO to Post","type":"main","index":0}]]},"URL VIDEO to Post":{"main":[[{"node":"If","type":"main","index":0}]]},"Get Google Drive ID":{"main":[[{"node":"Share file","type":"main","index":0}]]},"Upload Video to BLOTATO":{"main":[[{"node":"Tiktok","type":"main","index":0}]]}}}